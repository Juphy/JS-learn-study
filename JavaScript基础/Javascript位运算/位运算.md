二进制或运算符（or）：符号为`|`，表示若两个二进制位都为 0，则结果为 0，否则为 1。

二进制与运算符（and）：符号为`&`，表示若两个二进制位都为 1，则结果为 1，否则为 0。

二进制否运算符（not）：符号为`~`，表示对一个二进制位取反。

异或运算符（xor）：符号为`^`，表示若两个二进制位不相同，则结果为 1，否则为 0。

左移运算符（left shift）：符号为`<<`

右移运算符（right shift）：符号为`>>`

带符号位的右移运算符（zero filled right shift）：符号为`>>>`

位运算符直接处理的是每一个比特位(bit)，是非常底层的运算，好处是速度极快，缺点是很不直观。位运算符只对整数起作用，如果运算子不是整数，会自动转为整数后再执行。虽然在 Javascript 内部，数值都是以 64 位浮点数的形式存储，但是做位运算的时候，是以 32 位带符号的整数进行运算的，并且返回的也是一个 32 位带符号的整数。

`i = i | 0` 将 i (不管是整数还是小数)转为 32 位整数，对于一般的整数，返回值不会有任何变化，对于大于 2 的 32 次方的整数，大于 32 位的数位都会被舍去。

```
1.001 | 0  => 1
1.999 | 0  => 1
1 | 0  =>  1
-1 | 0  =>  -1
(2**32+1) | 0  =>  1
(2**32-1) | 0  =>  1
```

`二进制或运算符`|`逐位比较两个运算子，两个二进制位之中只要有一个为 1，就返回 1，否则返回 0。`

```
0 | 3  =>  3
2.9 | 0  =>  2
-2.9 | 0  =>  -2
2147483649.4 | 0 =>  -2147483647
```

0 和 3 的二进制形式分别是 00 和 11，所以进行二进制或运算就会得到 11(即 3)。位运算只对整数有效，遇到小数时，会将小数部分舍去，只保留整数部分。所以将一个小数与 0 进行二进制或运算，等同于对该数去除小数部分，即取整数位。这种取整方法不适用超过 32 位整数最大值 2147483647（2^31-1）。

`二进制与运算符`&`的规则是逐位比较两个运算子，两个二进制位之中只要有一个位为0，就返回0，否则返回1。`

```
0 & 3  =>  0
```

0 和 3 的二进制形式分别是 00 和 11，所以进行二进制与运算就会得到 00(即 0)。

`二进制否运算符（~）将每个二进制位都变为相反值（0变为1，1变为0）。`

```
~3  =>  -4
~-3  =>  2
~~3  =>  3
~~2.9 // 2
~~47.11 // 47
~~1.9999 // 1
总结：取整，取反-1
```

JavaScirpt 内部将所有的运算子都转为 32 位的二进制整数再进行运算。3 的 32 位整数形式是 00000000000000000000000000000011，二进制否运算以后得到 11111111111111111111111111111100，由于第一位（符号位）是 1，所以这个数是一个负数。JavaScript 内部采用补码形式表示负数，既需要将这个数减去 1，再取一次反，然后加上负号，才能得到这个负数对应的 10 进制值。这个数减去 1 等于 11111111111111111111111111111011，再取一次反得到 00000000000000000000000000000100，再加上负号就是-4。
-3 的取反值等于-1 减去-3，结果为 2。
对一个整数连续两次二进制否运算，得到它自身。

`所有的位运算都只对整数有效。`进制否运算遇到小数时，也会将小数部分舍去，只保留整数部分。所以，对一个小数连续进行两次二进制否运算，能达到取整效果。

使用二进制否运算取整，是所有取整方法中最快的一种。

对字符串或者其他类型的值进行二进制运算，JavaScript 引擎会先调用 Number 函数，将字符串转为数值。

```
~'011' => ~Number('011')  => -12
~'42 asd'  => ~Number('42 asd') => -1
~'0xcafebabe' => ~Number('0xcafebabe') => 889275713
~'deadbeef' => -1
~[]  => ~Number([])  => -1
~NaN  =>  ~Number(NaN)  => -1
~null  =>  ~Number(null)  =>  -1
```

`异或运算`^`在两个二进制位不同时返回1，相同时返回0。`
"异或运算"的应用：连续对两个数 a 和 b 进行三次异或运算，可以互换它们的值。

```
var a  = 99, b = 10;
a ^= b, b^=a, a^=b;
a => 10
b => 99

12.9 ^ 0  => 12
```

异或运算亦可以取整。

`左移运算符`<<`表示将一个数的二进制值向左移动指定的位数，尾部补0，即乘以2的指定次方（最高位即符号位不参与移动）。`

```
4 << 1  => 8
-4 << 1  => -8
```

| 运算符 | 名称         | 描述                                                     |
| :----- | :----------- | :------------------------------------------------------- |
| &      | AND          | 如果两位都是 1，则设置每位为 1                           |
| \|     | OR           | 如果两位之一为 1 则设置每位为 1                          |
| ^      | XOR          | 如果两位只有一位为 1 则设置每位为 1                      |
| ~      | NOT          | 反转所有位                                               |
| <<     | 零填充左位移 | 通过从右推入零向左位移，并使最左边的位脱落。             |
| > >    | 有符号右位移 | 通过从左推入最左位的拷贝来向右位移，并使最右边的位脱落。 |
| > > >  | 零填充右位移 | 通过从左推入零来向右位移，并使最右边的位脱落。           |

| 操作    | 结果 | 等同于       | 结果 |
| :------ | :--- | :----------- | :--- |
| 5 & 1   | 1    | 0101 & 0001  | 0001 |
| 5 \| 1  | 5    | 0101 \| 0001 | 0101 |
| 5 ^ 1   | 4    | 0101 ^ 0001  | 0100 |
| ~ 5     | 10   | ~0101        | 1010 |
| 5 << 1  | 10   | 0101 << 1    | 1010 |
| 5 >> 1  | 2    | 0101 >> 1    | 0010 |
| 5 >>> 1 | 2    | 0101 >>> 1   | 0010 |

### JavaScript 使用 32 位按位运算数

JavaScript 将数字存储为 64 位浮点数，但所有按位运算都以 32 位进制数执行。
在执行位运算之前，JavaScript 将数字转换为 32 位有符号整数。
执行按位操作后，结果将转换回 64 位 JavaScript 数。
`以上使用的是4位无符号二进制数，所以~5返回10`。
由于 JavaScript 使用 32 位有符号整数，JavaScript 将返回-6。
00000000000000000000000000000101 (5)
11111111111111111111111111111010 (~5 = -6)
有符号整数使用最左边的位作为减号。

> 负数按补码形式参加按位与运算（&）、位或运算（|）。

> JavaScript（零填充）位运算左移（<<）

这是零填充的左移。一个或多个零数位从右被推入，最左侧的数位被移除。
若左移时舍弃的高位不包含 1，则每左移一位，相当于该数乘以 2

> JavaScript（有符号）位运算右移（>>）

这是保留符号的右移。最左侧的数位被从左侧推入，最右侧的数位被移出。
操作数每右移一位，相当于该数除以 2

> JavaScript（零填充）右移（>>>）

这是零填充的右移。一个或多个零数位从左侧被推入，最右侧的数位被移出。

> 相反数是整数的二进制补码加 1

| 二进制表示                       | 十进制值 |
| :------------------------------- | :------- |
| 00000000000000000000000000000101 | 5        |
| 11111111111111111111111111111011 | -5       |
| 00000000000000000000000000101000 | 40       |
| 11111111111111111111111111011000 | -40      |
| 11111111111111111111111111011001 | -41      |

> 十进制转换为二进制

num.toString(radix)

> 二进制转换成十进制

parseInt(num, radix)
